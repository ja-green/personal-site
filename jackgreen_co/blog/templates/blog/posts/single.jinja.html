{# Copyright (C) 2024 Jack Green (jackgreen.co)

   This program is free software: you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation, either version 3 of the License, or
   (at your option) any later version.

   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
   GNU General Public License for more details.

   You should have received a copy of the GNU General Public License
   along with this program. If not, see <https://www.gnu.org/licenses/>. #}

{% extends "layouts/two-column/right-sidebar.jinja.html" %}

{% from "components/header.jinja.html" import header, header_title, header_extra %}
{% from "components/breadcrumb.jinja.html" import breadcrumb, breadcrumb_item %}
{% from "components/link.jinja.html" import link %}
{% from "components/badge.jinja.html" import badge_link_secondary %}

{% block navbar %}
{% include 'main/partials/navbar.jinja.html' %}
{% endblock navbar %}

{% block header %}
{% call header() %}
    {{ header_title(post.title, subtitle=post.date.strftime("%B %d, %Y")) }}
    {% call header_extra() %}
        {% call breadcrumb() %}
            {{ breadcrumb_item(messages["blog_posts_heading"], url_for("blog.posts", page=1)) }}
            {{ breadcrumb_item(post.title, active=true) }}
        {% endcall %}
    {% endcall %}
{% endcall %}
{% endblock header %}

{% block content %}
<article class="prose mb-12">
    {{ post.content | safe }}
</article>
{% endblock content %}

{% block sidebar %}
<h2 class="text-lg font-semibold mb-4">{{ messages["blog_post_toc_heading"] }}</h2>
<nav class="prose mb-6 text-sm prose-ul:list-none prose-ul:ps-0">
    {{ post.toc | safe }}
</nav>
<h2 class="text-lg font-semibold mb-4">{{ messages["blog_post_categories_heading"] }}</h2>
<ul class="text-sm text-muted-foreground mb-6">
    {% for category in post.categories %}
        <li class="pl-1.5 mt-[0.2rem] mb-[0.2rem]">
            {{ link(category.title, "#") }}
        </li>
    {% endfor %}
</ul>
<h2 class="text-lg font-semibold mb-4">{{ messages["blog_post_tags_heading"] }}</h2>
<ul class="flex text-sm text-muted-foreground mb-6">
    {% for tag in post.tags %}
        <li class="pl-1.5 mt-[0.2rem] mb-[0.2rem]">
            {{ badge_link_secondary(tag.title) }}
        </li>
    {% endfor %}
</ul>
{% endblock sidebar %}

{% block footer %}
{% include 'main/partials/footer.jinja.html' %}
{% endblock footer %}

{% block script %}
<script src="{{ url_for('static', filename='js/post.js') }}"></script>
{% endblock script %}

{# vim: set ft=htmldjango: #}
